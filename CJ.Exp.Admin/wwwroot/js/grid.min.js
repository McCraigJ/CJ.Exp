var Grid=function(){var i=this,n,t={};i.Initialise=function(i,r,u,f,e){function o(n){return"<td class='jsgrid-cell' style='width: "+n.width+"px;'>"}function s(i,r){var f=n.jsGrid("option","pageIndex"),u;t.$currentPageInput.val(f);t.$editValueInput.val(i);u=r;e!==undefined&&e.length>0&&(u="/"+e+"/"+u);t.$gridForm.attr("action",u);t.$gridForm.submit()}if(n=$(i),t={$gridForm:$("#grid-form"),$editValueInput:$("#editValue"),$currentPageInput:$("#currentPage")},f>0==!1&&(f=1),n.length>0){n.jsGrid({width:"100%",height:"400px",autoload:!0,paging:!0,pageLoading:!0,pageSize:20,pageIndex:f,rowRenderer:function(n){for(var t,r,f,e,i="<tr class='jsgrid-row' data-id='"+n.id+"'>",u=0;u<this.fields.length;u++){t=this.fields[u];r=n[t.name];t.nestedName!==undefined&&(r=n[t.name][t.nestedName]);switch(t.type){case"date":f=new Date(r);i+=o(t)+f.toLocaleDateString()+"<\/td>";break;case"currency":e=parseFloat(r);i+=o(t)+e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")+"<\/td>";break;case"control":i+="<td class='jsgrid-cell jsgrid-control-field jsgrid-align-center' style='width: 50px;'><input class='jsgrid-button jsgrid-edit-button' type='button' title='Edit'><input class='jsgrid-button jsgrid-delete-button' type='button' title='Delete'><\/td>";break;default:i+=o(t)+r+"<\/td>"}}return i+="<\/ tr>",$(i)},fields:r,controller:{loadData:function(n){var t=$.Deferred();return $.ajax({url:u,data:n,dataType:"json"}).done(function(n){t.resolve({data:n.gridRows,itemsCount:n.totalRecordCount})}),t.promise()}}});n.on("click",".jsgrid-button",function(){var t=$(this),n=$(this).closest("tr").attr("data-id");t.hasClass("jsgrid-edit-button")?s(n,"Edit"):s(n,"Delete")})}}};